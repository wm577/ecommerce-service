<div class="detail-container">
  <div class="detail-header">
    <button class="btn-back" (click)="goBack()">
      <i class="bi bi-arrow-left"></i> Back to Dashboard
    </button>
    <div class="header-main">
      <h2>Order Details #{{order()?.id}}</h2>
      <span class="status-badge" [class]="order()?.status">
        {{order()?.status}}
      </span>
    </div>
  </div>

  <div class="detail-grid">
    <div class="items-card">
      <h3>Ordered Items</h3>
      <table class="items-table">
        <thead>
        <tr>
          <th>Product</th>
          <th>Quantity</th>
          <th>Price</th>
          <th>Total</th>
        </tr>
        </thead>
        <tbody>
          @for (item of order()?.orderItems; track item.productId) {
            <tr>
              <td>{{item.productName}}</td>
              <td>{{item.quantity}}</td>
              <td>{{item.priceAtPurchase | currency}}</td>
              <td>{{item.priceAtPurchase * item.quantity | currency}}</td>
            </tr>
          }
        </tbody>
      </table>
    </div>

    <div class="info-sidebar">
      <div class="info-card">
        <h3>Customer Info</h3>
        <p><strong>Name:</strong> {{order()?.userName}}</p>
        <p><strong>Date:</strong> {{order()?.orderDate | date:'medium'}}</p>
      </div>

      <div class="info-card payment">
        <h3>Payment Summary</h3>
        <div class="summary-row">
          <span>Subtotal:</span>
          <span>{{order()?.totalAmount | currency}}</span>
        </div>
        <div class="summary-row">
          <span>Discount({{ (order()?.discountAmount! / order()?.totalAmount!) | percent:'1.0-2' }} OFF) :</span>
          <span class="discount-text">(-) {{order()?.discountAmount | currency}}</span>
        </div>
        <div class="summary-row total">
          <span>Net Total:</span>
          <span>{{order()?.netAmount | currency}}</span>
        </div>
      </div>
    </div>
  </div>
</div>
